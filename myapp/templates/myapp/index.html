<!-- myapp/templates/myapp/index.html -->

{% extends 'myapp/base.html' %}

{% block content %}
<h1 class="mb-4">My To-Do List</h1>

<form method="post">
  {% csrf_token %}
  <div class="input-group mb-3">
    <input type="text" name="task" class="form-control" placeholder="New task" required>
    <div class="input-group-append">
      <button class="btn btn-primary" type="submit">Add</button>
    </div>
  </div>
</form>

<h2 class="mb-4">Incomplete Tasks</h2>

<ul class="list-group mb-4">
  {% for todo in todo_list_not_completed %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    {{ todo.task }}
    <form action="{% url 'update' todo.id %}" method="post">
      {% csrf_token %}
      <div class="form-check">
        <input class="form-check-input" type="checkbox" name="is_completed"
               onchange="this.form.submit()" {% if todo.is_completed %}checked{% endif %}>
        <label class="form-check-label">Completed</label>
      </div>
    </form>
  </li>
  {% empty %}
  <li class="list-group-item text-center">No incomplete tasks</li>
  {% endfor %}
</ul>

<h2 class="mb-4">Completed Tasks</h2>

<ul class="list-group mb-4">
  {% for todo in todo_list_completed %}
  <li class="list-group-item d-flex justify-content-between align-items-center">
    {{ todo.task }}
    <form action="{% url 'update' todo.id %}" method="post">
      {% csrf_token %}
      <div class="form-check">
        <input class="form-check-input" type="checkbox" name="is_completed"
               onchange="this.form.submit()" {% if todo.is_completed %}checked{% endif %}>
        <label class="form-check-label">Completed</label>
      </div>
    </form>
  </li>
  {% empty %}
  <li class="list-group-item text-center">No completed tasks</li>
  {% endfor %}
</ul>
{% endblock %}
